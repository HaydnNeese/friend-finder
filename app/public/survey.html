<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Survey Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        
        <div class="container">
            <br>
            <div class="row">
                <div class="col-md-6">
                    <h1>Friend Finder Survey Page</h1>
                </div>
                <div class="col-md-6">
                    <a id="homepage" class="btn btn-primary btn-lg" href="*" role="button">Return to Homepage</a>
                </div>
            </div>
        </div>

        <hr>
        <h4>About You</h4>

        <form>
            <div class="form-group">
                <label for="formGroupExampleInput">Name (Required)</label>
                <input type="text" class="form-control" id="name-input" placeholder="Enter Name Here">
            </div>
            <div class="form-group">
                <label for="formGroupExampleInput2">Link to profile image(required)</label>
                <input type="text" class="form-control" id="image-link" placeholder="Image Link Here">
            </div>
        </form>

        <hr>
        <h4>Answer the questions by deciding how strongly you agree with the statement, on a scale of 1-5</h4>
        <h5>1 being do not agree and 5 being strongly agree</h5>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">When you see a person in need your first instinct is to help them
                even if it means putting yourself at risk.</label>
            <select class="form-control" id="answer-one">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">You think dressing up in a tight latex costume is perfectly normal
                and can lead to a pretty good night.
            </label>
            <select class="form-control" id="answer-two">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">You prefer spending the late hours of the night lurking around town
                beating up people that allegedly have committed crimes.</label>
            <select class="form-control" id="answer-three">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">The President just called, its a crisis that threatens the entire
                world, he needs you to save the world, you will do anything it takes even if it means causing
                destruction to entire cities to stop it.</label>
            <select class="form-control" id="answer-four">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">You enjoy lassoing men until they fall into a submissive, truth
                telling state of unconsciousness.</label>
            <select class="form-control" id="answer-five">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">You can breathe under water and talk to fish.</label>
            <select class="form-control" id="answer-six">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">The only thing you like more than crackin' skulls is a cheezy
                one-liner while looking at the camera.</label>
            <select class="form-control" id="answer-seven">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">You believe a punch isn't really a punch unless its accompanied by a
                screen graphic that displays an onomatopoeia upon contact.</label>
            <select class="form-control" id="answer-eight">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">I prefer to wait until my enemies are done monologuing before I begin
                to attack them.</label>
            <select class="form-control" id="answer-nine">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>

        <div class="form-group">
            <label for="exampleFormControlSelect1">A phone booth is a perfectly fine personal changing room and those
                who differ are clearly insecure about their body image.</label>
            <select class="form-control" id="answer-ten">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <button type="button" class="btn btn-primary btn-lg btn-block" id="submit">Submit Your Answers</button>
        <hr>
        <br>
    </div>

    <footer class="footer">
        <div class="container">
            <p><a href="/api/friends">API Friends List</a> | <a
                    href="https://github.com/HaydnNeese/friend-finder">GitHub Repo</a></p>
        </div>
    </footer>

    <div class="container">
        <!-- MODAL -->
        <div class="modal fade" id="friendModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p id="friend-name"></p>
                        <img id="friend-img" alt="friend match profile picture" width="300" height="200">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.modal -->
    </div>
    <script type="text/javascript">

        $("#submit").on("click", function (event) {
            event.preventDefault();
            var noEmptyFields = true;
            $(".form-control").each(function () {
                if ($(this).val() === '') {
                    noEmptyFields = false;
                }
            });

            if (noEmptyFields === true) {
                var userData = {
                    name: $("#name-input").val(),
                    photo: $("#image-link").val(),
                    scores: [
                        $("#answer-one").val(),
                        $("#answer-two").val(),
                        $("#answer-three").val(),
                        $("#answer-four").val(),
                        $("#answer-five").val(),
                        $("#answer-six").val(),
                        $("#answer-seven").val(),
                        $("#answer-eight").val(),
                        $("#answer-nine").val(),
                        $("#answer-ten").val()
                    ]
                };
                console.log(userData);
                $.post("/api/friends", userData, function (data) {
                    $("#friend-name").text(data.name);
                    $("#friend-img").attr("src", data.photo);
                });
                $('#friendModal').modal('show')
            } else {
                alert("All of the survery questions must be answered to continue");
            };

        });
    </script>
</body>

</html>